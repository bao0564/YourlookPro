@model yourlook.Models.ShoppingCartDetail
@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<main class="mar150_container cart" style="margin-bottom:150px" > 
    <div class="body-cart">
        <div class="address-cart">
            <div class="box-cart box-cart-address" style="background-color:#000;color:#fff">
                <div class="flct" style="justify-content:space-between">
                    <div class="title">
                        <h3 style="color:#fff">Thông Tin Địa Chỉ </h3>
                    </div>
                    @if(Context.Session.GetInt32("userid")!=null){
                        <div>
                            <a onclick="openAD()"><i onclick="openAD()" class="fa-solid fa-plus fa-lg" style="color: #fff;"></i></a>
                        </div>
                    }
                    else
                    {
                        <div></div>
                    }
                </div>
                <div id="form-address" class="form-address bdrdu" style="position:fixed;top:50%; left:50%;transform:translate(-50%,-50%);display:none;background-color:#e9e9e9;z-index:10;height:300px;width:auto">
                    <div class="bdrdu" onclick="closeAD()" style="position:absolute;right:-20px;top:-15px;background-color:#2f3640;color:#fff;cursor:pointer">✕</div>
                    <div style="margin:20px">
                        @if (Model.Address != null && Model.Address.Count > 0)
                        {
                            <div style="position:relative;height:250px">
                                <h3 class="fljct mg">Chọn Địa chỉ của bạn</h3>
                                @foreach (var address in Model.Address)
                                {
                                    <div class="fljct bdrdu mg" style="background-color:#fff">
                                        <input type="checkbox" class="address-val" style="margin:0 10px" data-name="@address.TenNguoiNhan" data-phone="@address.Sdt" data-city="@address.City" data-district="@address.QuanHuyen" data-ward="@address.PhuongXa" data-address="@address.Addres" />
                                        <div class="" style="margin:0 10px;padding:10px">
                                            <h5>@address.TenNguoiNhan- @address.Sdt -@address.PhuongXa,@address.QuanHuyen,@address.City</h5>
                                            <h5>@address.Addres</h5>
                                        </div>
                                    </div>
                                }
                                <div class="fljct" style="position:absolute; bottom:0;left:50%">
                                    <button class="bdrdu" onclick="closeAD()">Chọn</button>
                                </div>
                            </div>
                        }
                        else
                        {
                            <p>Bạn chưa có địa chỉ nào được lưu.</p>
                            <div class="fljct" style="">
                                <a class="pd bdrdu mg" href="@Url.Action("Add","UserAddress")">Thêm địa chỉ<i class="fa-solid fa-plus" style="color: #000000;"></i></a>
                            </div>
                        }
                    </div>
                </div>
                <div class="box-cart" style="background-color:#fff">
                    <div class="" style="background-color:#fff">
                        <div class="space-address">
                            <div class="box-address"><input type="text" name="TenKh" id="TenKh" placeholder="Tên người nhận" required /></div>
                            <div class="box-address"><input type="text" name="Sdt" id="Sdt" placeholder="SDT người nhận" required /></div>
                        </div>
                        <div class="space-address">
                            <div class="box-address">
                                <input type="text" name="City" id="City" placeholder="City ...">
                            </div>
                            <div class="box-address">
                                <input type="text" name="District" id="District" placeholder="District ...">
                            </div>
                            <div class="box-address">
                                <input type="text" name="Ward" id="Ward" placeholder="Ward ...">
                            </div>
                        </div>
                        <div class="space-address">
                            <div class="box-address">
                                <input type="text" name="DiaChi" id="DiaChi" placeholder="Địa chỉ chi tiết" />
                            </div>
                        </div>
                        <div class="space-address">
                            <div class="box-address">
                                <input type="text" name="GhiChu" id="GhiChu" placeholder="Ghi chú cho đơn hàng" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="box-cart-pay-voucher">
                <div class="box-cart box-cart-pay" style="background-color:#000;">
                    <div>
                        <h3 style="color:#fff">Hình Thức Thanh Toán  </h3>
                    </div>
                    <div class="box-cart pay-list" style="background-color:#fff">
                        <div class="space-pay">
                            @foreach (var pay in Model.Payments)
                            {
                                <div class="box-pay">
                                    <div class="pay-title">
                                        <span class="check-box">
                                            <input type="checkbox" class="pay-checked" data-payid="@pay.PaymentId" data-payicon="@Url.Content("/icon/"+@pay.Icon)" data-payname="@pay.PaymentName" />
                                        </span>
                                        <div class="icon">
                                            <img src="@Url.Content("/icon/"+pay.Icon)" alt="">
                                        </div>
                                        <div class="title">@pay.PaymentName</div>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                </div>
                <div class="box-cart box-cart-voucher" style="background-color:#000;">
                    <div>
                        <h3 style="color:#fff">Voucher</h3>
                    </div>
                    <div class="box-cart voucher-list" style="background-color:#fff">
                        <div class="space-pay">
                            <div class="box-cart" style="flex-grow:1">
                                <div class="cart-container flct">
                                    <span class="check-box">
                                        <input type="checkbox" />
                                    </span>
                                    <div class="box-img flct">
                                        <img src="/images/desc_1.jpg" alt="Product Image" />
                                    </div>
                                    <div style="margin-left:10px">
                                        <div>Giảm 25%</div>
                                        <div>Giảm Tối đa 50.000 VNĐ </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="space-pay">
                            <div class="box-cart" style="flex-grow:1">
                                <div class="cart-container flct">
                                    <span class="check-box">
                                        <input type="checkbox" />
                                    </span>
                                    <div class="box-img flct">
                                        <img src="/images/desc_1.jpg" alt="Product Image" />
                                    </div>
                                    <div style="margin-left:10px">
                                        <div>Giảm 25%</div>
                                        <div>Giảm Tối đa 50.000 VNĐ </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="order-cart box-cart" style="background-color:#fff;margin:20px 0">
            <div>
                <div class="title">
                    <h3 style="border-bottom:1px solid">Giỏ Hàng </h3>
                </div>
                <div id="List-prd-cart">
                    @* @await Html.PartialAsync("Partial_Product_In_Cart") *@

                    @if (Model.Items != null && Model.Items.Any())
                    {
                        foreach (var prd in Model.Items)
                        {
                            <div class="box-cart" id="sp-@prd.ProductId">
                                <div class="cart-container flex-cart">
                                    <div class="check-box">
                                        <input type="checkbox" class="cart-checkbox" data-id="@prd.ProductId" data-price="@prd.ProductPrice" data-total="@prd.Total" data-sizeid="@prd.SizeId" data-colorid="@prd.ColorId"/>
                                    </div>
                                    <div class="flex-cart">
                                        <div class="box-img" style="display:flex; align-items:center">
                                            <img src="@Url.Content("/img/" + prd.ProductImg)" alt="Product Image" />
                                        </div>
                                        <div class="cart-infor">
                                            <div class="infor-colum">
                                                <p class="cart-name"style="color:#000">@prd.ProductName</p>
                                                <div class="flex-cart">
                                                    <div class="flct"style="white-space:nowrap">Phân Loại:
                                                        <div class="bdrdu">@prd.ColorName</div>
                                                        <div class="bdrdu">@prd.SizeName</div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="flex-cart infor-colum">
                                                <div class="flct product_price" data-price="@prd.ProductPrice">
                                                    @prd.Total.ToString("N0") VND
                                                </div>
                                                <div>
                                                    <div class="quantity_selector_cart">
                                                        <span class="minus-cart" data-id="@prd.ProductId"><i class="fa fa-minus" aria-hidden="true"></i></span>
                                                        <span class="quantity_value-cart" id="quantity_@prd.ProductId">@prd.ProductQuantity</span>
                                                        <span class="plus-cart" data-id="@prd.ProductId"><i class="fa fa-plus" aria-hidden="true"></i></span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="check-box">
                                        <div>
                                            <input type="button" class="deletebtn" value="xóa" asp-controller="shoppingcart" data-id="@prd.ProductId" />
                                            @*  <input type="button" class="btnUpdate" value="cập nhật" asp-controller="shoppingcart" data-id="@prd.ProductId" /> *@
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                    }
                    else
                    {
                        <p style="display:flex;justify-content:center">giỏ hàng trống</p>
                    }

                </div>
            </div>
        </div>
        <div id="form-yc-login" class="form-login">
            <div class="fa-login" id="fa-login" style="z-index:10">
                <div class="creen-login">
                    <div class="box-login box" style="width:700px">
                        <span class="close-login" onclick="ClLable()">✕</span>
                        <div class="login-left" style="background-color:#2f3640;border-radius:10px">
                            <div style="position: absolute;top: 50%;left: 50%;transform: translate(-50%, -50%);">
                                <form action="" id="dangnhap">
                                    <div class="title">
                                        <p class="login">Đăng Nhập</p>
                                    </div>
                                    <div class="sm-title" style="color:#fff">
                                        Bạn chưa đăng nhập, hãy đăng nhập tại đây!
                                    </div>
                                    <div class="btn-swich btn">
                                        <a href="@Url.Action("Login","Access")" style="display:flex;align-items:center;background-color:#000;border-radius:5px"><p>Đăng Nhập</p></a>
                                    </div>
                                </form>
                            </div>
                        </div>
                        <div class="login-right">
                            <div style="position: absolute;top: 50%;left: 50%;transform: translate(-50%, -50%);">
                                <img src="/logo/login.png" alt="" />
                                <div class="sm-title">
                                    Bạn chưa có tài khoản.Hãy tạo ở đây!
                                </div>
                                <div class="btn-swich btn">
                                    <a href="@Url.Action("Register","Access")" style="display:flex;align-items:center;background-color:#000;border-radius:5px"><p>Đăng Ký Tài Khoản</p></a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="box-pay-all all-choose">
            <div class="box-cart">
                <div class="flct" style="height:50px">
                    <div class="tipe-choose">
                        <div class="infor-payment flct bdrdu">
                            <div class="fljct bdrdu">
                                <img id="payicon" src="#" alt="" style="height:25px">
                                <p id="payid" style="display:none">...</p>
                                <div id="payname">Chọn Hình Thức Thanh Toán Bạn Muốn</div>
                            </div>
                        </div>
                        <div class="infor-payment bdrdu">voucher</div>
                    </div>
                    <div class="price-choose" style="justify-content:flex-end">
                        <div class="fljct" style="flex-direction: column">
                            <div>
                               
                            </div>
                            <div class="flex-cart title total-price-container">
                                Tổng: <div class="flct product_price" style="color:#fff;margin:0 10px" id="TongTien"></div>
                            </div>
                        </div>
                        <div style="">
                            @if(Context.Session.GetString("user") !=null)
                            {
                                <button class="pay-btn">Đặt Hàng</button>
                            }
                            else
                            {
                                <button id="pay-btn-none" class="pay-btn-none" onclick="OpLable()">Đặt Hàng</button>
                            }
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main> 
@section styles {

    <style>
        .footer{
            display:none;
        }
        .super_container{
            background-color:#2f3640;
        }
    </style>
    <script>
        function OpLable(){
            document.getElementById("form-yc-login").style.display = "block";
            document.getElementById("form-register").style.display = "none";
        }
        function ClLable() {
            document.getElementById("form-yc-login").style.display = "none";
        }
        //đóng mở form chọn địa chỉ
        function openAD() {
            document.getElementById("form-address").style.display = "block";
        }
        function closeAD() {
            document.getElementById("form-address").style.display = "none";
        }
    </script>
}
<script src="../js/addtocart.js"></script>
<script src="../js/address.js"></script>